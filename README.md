# Aè‚¡æ•°æ®æµMCPæœåŠ¡

> æä¾›ç¬¦åˆMCPï¼ˆModel Context Protocolï¼‰æ ‡å‡†çš„Aè‚¡æ•°æ®è·å–å’ŒæŠ€æœ¯åˆ†ææœåŠ¡

[![Python Version](https://img.shields.io/badge/python-3.8%2B-blue)](https://www.python.org/)
[![MCP Protocol](https://img.shields.io/badge/MCP-1.0.0-green)](https://modelcontextprotocol.io/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

## ğŸ“– ç®€ä»‹

æœ¬é¡¹ç›®å°†Aè‚¡æ•°æ®æµåŠŸèƒ½æ”¹é€ ä¸ºç¬¦åˆMCPåè®®çš„æ ‡å‡†æœåŠ¡ï¼Œä½¿å…¶èƒ½å¤Ÿè¢«å„ç§AIå·¥å…·å’Œå®¢æˆ·ç«¯è°ƒç”¨ã€‚é€šè¿‡MCPåè®®ï¼ŒAIåŠ©æ‰‹å¯ä»¥è½»æ¾è·å–Aè‚¡å¸‚åœºæ•°æ®ã€æŠ€æœ¯æŒ‡æ ‡ã€è´¢åŠ¡ä¿¡æ¯ç­‰ï¼Œä¸ºæŠ•èµ„åˆ†ææä¾›æ•°æ®æ”¯æŒã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ¯ **MCPåè®®æ ‡å‡†**: å®Œå…¨ç¬¦åˆMCP 1.0.0åè®®è§„èŒƒ
- ğŸ”„ **å¼‚æ­¥æ”¯æŒ**: æ‰€æœ‰å·¥å…·æ–¹æ³•æ”¯æŒå¼‚æ­¥è°ƒç”¨
- ğŸ“¦ **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„æ¶æ„ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—ç³»ç»Ÿ
- âœ… **æµ‹è¯•è¦†ç›–**: 100%æµ‹è¯•è¦†ç›–ç‡ï¼Œç¡®ä¿ä»£ç è´¨é‡
- ğŸš€ **é«˜æ€§èƒ½**: å†…ç½®ç¼“å­˜æœºåˆ¶ï¼Œä¼˜åŒ–æ•°æ®è·å–æ€§èƒ½

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“Š **Kçº¿æ•°æ®**: è·å–è‚¡ç¥¨æ—¥çº¿ã€å‘¨çº¿ã€æœˆçº¿æ•°æ®
- ğŸ’¹ **å®æ—¶è¡Œæƒ…**: è·å–è‚¡ç¥¨å®æ—¶ä»·æ ¼å’Œæ¶¨è·Œå¹…
- ğŸ“ˆ **æŠ€æœ¯æŒ‡æ ‡**: æ”¯æŒRSIã€MACDã€BOLLã€å‡çº¿ç­‰20+ç§æŠ€æœ¯æŒ‡æ ‡
- ğŸ’° **è´¢åŠ¡æ•°æ®**: è·å–èµ„äº§è´Ÿå€ºè¡¨ã€åˆ©æ¶¦è¡¨ã€ç°é‡‘æµé‡è¡¨
- ğŸ“° **æ–°é—»æ•°æ®**: è·å–è‚¡ç¥¨ç›¸å…³æ–°é—»èµ„è®¯
- ğŸ”¥ **æ¶¨åœè‚¡**: è·å–ä»Šæ—¥æ¶¨åœè‚¡ç¥¨åˆ—è¡¨
- ğŸ“ **åƒè‚¡åƒè¯„**: è·å–è¯„åˆ†ã€å…³æ³¨åº¦ã€å‚ä¸æ„æ„¿ç­‰æ•°æ®
- ğŸ’¸ **èµ„é‡‘æµå‘**: ä¸ªè‚¡èµ„é‡‘æµã€æ¦‚å¿µèµ„é‡‘æµã€è¡Œä¸šèµ„é‡‘æµã€å¤§å•è¿½è¸ª


## ğŸ“¦ å®‰è£…

### å‰ç½®è¦æ±‚

- Python 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬
- [uv](https://docs.astral.sh/uv/) åŒ…ç®¡ç†å™¨

å®‰è£… uvï¼š
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

### æ–¹å¼ä¸€ï¼šç›´æ¥ä» GitHub è¿è¡Œï¼ˆæ¨èï¼‰

æ— éœ€å…‹éš†ä»£ç ï¼Œä¸€æ¡å‘½ä»¤å³å¯ä½¿ç”¨ï¼š

```bash
# ä¸´æ—¶è¿è¡Œï¼ˆæ¯æ¬¡æ‹‰å–æœ€æ–°ä»£ç ï¼‰
uvx --from git+https://github.com/Fize/choseStock.git a-share-mcp

# æˆ–å…¨å±€å®‰è£…
uv tool install git+https://github.com/Fize/choseStock.git
a-share-mcp
```

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘

é€‚ç”¨äºéœ€è¦ä¿®æ”¹ä»£ç æˆ–å‚ä¸å¼€å‘ï¼š

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/Fize/choseStock.git
cd choseStock

# ä½¿ç”¨ uv å®‰è£…ä¾èµ–
uv sync

# è¿è¡ŒæœåŠ¡å™¨
uv run a-share-mcp
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¸€é”®è¿è¡Œï¼ˆæ— éœ€å…‹éš†ä»£ç ï¼‰

```bash
# ç›´æ¥ä» GitHub è¿è¡Œ
uvx --from git+https://github.com/Fize/choseStock.git a-share-mcp
```

### é…ç½® MCP å®¢æˆ·ç«¯

MCP æœåŠ¡å™¨é€šè¿‡æ ‡å‡†è¾“å…¥è¾“å‡ºï¼ˆstdioï¼‰ä¸å®¢æˆ·ç«¯é€šä¿¡ã€‚åœ¨ MCP å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š

**æ–¹å¼ä¸€ï¼šç›´æ¥ä» GitHub è¿è¡Œï¼ˆæ¨èï¼‰**

æ— éœ€å…‹éš†ä»£ç ï¼Œè‡ªåŠ¨ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ï¼š

```json
{
  "mcpServers": {
    "a-share-dataflows": {
      "command": "uvx",
      "args": [
        "--from",
        "git+https://github.com/Fize/choseStock.git",
        "a-share-mcp"
      ]
    }
  }
}
```

**æ–¹å¼äºŒï¼šä½¿ç”¨å…¨å±€å®‰è£…**

å…ˆå®‰è£…ï¼š`uv tool install git+https://github.com/Fize/choseStock.git`

```json
{
  "mcpServers": {
    "a-share-dataflows": {
      "command": "a-share-mcp"
    }
  }
}
```

**æ–¹å¼ä¸‰ï¼šä½¿ç”¨æœ¬åœ°é¡¹ç›®**

é€‚ç”¨äºå¼€å‘æˆ–éœ€è¦ä¿®æ”¹ä»£ç ï¼š

```json
{
  "mcpServers": {
    "a-share-dataflows": {
      "command": "uv",
      "args": [
        "--directory",
        "/absolute/path/to/choseStock",
        "run",
        "a-share-mcp"
      ]
    }
  }
}
```

### æµ‹è¯•è¿æ¥

ä½¿ç”¨ MCP Inspector æµ‹è¯•æœåŠ¡å™¨ï¼š

```bash
# ç›´æ¥ä» GitHub æµ‹è¯•
npx @modelcontextprotocol/inspector uvx --from git+https://github.com/Fize/choseStock.git a-share-mcp
```

## âš™ï¸ é…ç½®é€‰é¡¹

### ç¯å¢ƒå˜é‡

æœåŠ¡å™¨æ”¯æŒä»¥ä¸‹ç¯å¢ƒå˜é‡é…ç½®ï¼š

#### æ—¥å¿—é…ç½®

- **STOCK_LOG_FILE**: è‡ªå®šä¹‰æ—¥å¿—æ–‡ä»¶è·¯å¾„
  - é»˜è®¤å€¼: `~/.stock.log`
  - ç¤ºä¾‹: `export STOCK_LOG_FILE=/var/log/stock.log`

- **DEBUG**: å¯ç”¨è°ƒè¯•æ¨¡å¼
  - é»˜è®¤å€¼: æœªè®¾ç½®ï¼ˆINFOçº§åˆ«ï¼‰
  - è®¾ç½®ä»»æ„å€¼å¯ç”¨: `export DEBUG=1`

#### ä½¿ç”¨ç¤ºä¾‹

```bash
# ä½¿ç”¨é»˜è®¤é…ç½®ï¼ˆæ—¥å¿—ä¿å­˜åˆ° ~/.stock.logï¼‰
uvx --from git+https://github.com/Fize/choseStock.git a-share-mcp

# è‡ªå®šä¹‰æ—¥å¿—æ–‡ä»¶ä½ç½®
STOCK_LOG_FILE=/tmp/stock.log uvx --from git+https://github.com/Fize/choseStock.git a-share-mcp

# å¯ç”¨è°ƒè¯•æ¨¡å¼
DEBUG=1 uvx --from git+https://github.com/Fize/choseStock.git a-share-mcp

# ç»„åˆä½¿ç”¨
DEBUG=1 STOCK_LOG_FILE=/tmp/stock_debug.log uvx --from git+https://github.com/Fize/choseStock.git a-share-mcp
```

#### åœ¨MCPå®¢æˆ·ç«¯é…ç½®ä¸­ä½¿ç”¨

```json
{
  "mcpServers": {
    "a-share-dataflows": {
      "command": "uvx",
      "args": [
        "--from",
        "git+https://github.com/Fize/choseStock.git",
        "a-share-mcp"
      ],
      "env": {
        "STOCK_LOG_FILE": "/path/to/your/stock.log",
        "DEBUG": "1"
      }
    }
  }
}
```

### æ—¥å¿—åŠŸèƒ½

- **åŒé‡è¾“å‡º**: æ—¥å¿—åŒæ—¶è¾“å‡ºåˆ°ç»ˆç«¯å’Œæ–‡ä»¶
- **è‡ªåŠ¨è½®è½¬**: å•ä¸ªæ–‡ä»¶æœ€å¤§10MBï¼Œä¿ç•™5ä¸ªå¤‡ä»½
- **UTF-8ç¼–ç **: æ”¯æŒä¸­æ–‡æ—¥å¿—
- **è¯¦ç»†ä¿¡æ¯**: åŒ…å«æ—¶é—´æˆ³ã€æ¨¡å—åã€æ—¥å¿—çº§åˆ«å’Œæ¶ˆæ¯

æŸ¥çœ‹æ—¥å¿—ï¼š
```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f ~/.stock.log

# æŸ¥çœ‹æœ€å100è¡Œ
tail -100 ~/.stock.log

# æœç´¢é”™è¯¯ä¿¡æ¯
grep "ERROR" ~/.stock.log
```

è¯¦ç»†çš„æ—¥å¿—ä½¿ç”¨è¯´æ˜è¯·å‚è€ƒ [LOG_USAGE.md](./LOG_USAGE.md)

## ğŸ’» å¼€å‘æŒ‡å—

### å¸¸ç”¨å‘½ä»¤

```bash
# ç›´æ¥è¿è¡Œï¼ˆæ— éœ€å…‹éš†ï¼Œè‡ªåŠ¨è·å–æœ€æ–°ç‰ˆæœ¬ï¼‰
uvx --from git+https://github.com/Fize/choseStock.git a-share-mcp

# å…¨å±€å®‰è£…
uv tool install git+https://github.com/Fize/choseStock.git

# æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
uv tool install --reinstall git+https://github.com/Fize/choseStock.git

# å¸è½½
uv tool uninstall chosestock-cli

# æŸ¥çœ‹å·²å®‰è£…çš„å·¥å…·
uv tool list
```

### å¼€å‘å‘½ä»¤ï¼ˆéœ€è¦å…‹éš†ä»£ç ï¼‰

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/Fize/choseStock.git
cd choseStock

# åŒæ­¥ä¾èµ–
uv sync

# è¿è¡ŒæœåŠ¡å™¨
uv run a-share-mcp

# è¿è¡Œæµ‹è¯•
uv run pytest

# æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
uv run pytest --cov=dataflows_mcp --cov-report=html

# ä»£ç æ ¼å¼åŒ–
uv run black dataflows_mcp/
uv run isort dataflows_mcp/

# ç±»å‹æ£€æŸ¥
uv run mypy dataflows_mcp/

# æ·»åŠ æ–°ä¾èµ–
uv add <package-name>
```

### æ·»åŠ æ–°å·¥å…·

1. åœ¨ `dataflows_mcp/core/` ä¸­å®ç°æ ¸å¿ƒåŠŸèƒ½
2. åœ¨ `dataflows_mcp/tools/schemas.py` ä¸­å®šä¹‰ Schema
3. åœ¨ `dataflows_mcp/tools/mcp_tools.py` ä¸­æ·»åŠ å·¥å…·æ–¹æ³•
4. åœ¨ `dataflows_mcp/server/mcp_server.py` ä¸­æ³¨å†Œå·¥å…·
5. åœ¨ `dataflows_mcp/tests/` ä¸­æ·»åŠ æµ‹è¯•ç”¨ä¾‹

### æ•…éšœæ’é™¤

#### uvx å‘½ä»¤æœªæ‰¾åˆ°

å¦‚æœæç¤º `uvx: command not found`ï¼š

```bash
# å®‰è£…æˆ–æ›´æ–° uv
curl -LsSf https://astral.sh/uv/install.sh | sh

# é‡æ–°åŠ è½½ shell é…ç½®
source ~/.zshrc  # æˆ– source ~/.bashrc
```

#### é¦–æ¬¡è¿è¡Œè¾ƒæ…¢

`uvx` é¦–æ¬¡è¿è¡Œæ—¶éœ€è¦ä¸‹è½½å¹¶ç¼“å­˜ä¾èµ–ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼š

```bash
# é¦–æ¬¡è¿è¡Œå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ
uvx --from git+https://github.com/Fize/choseStock.git a-share-mcp

# åç»­è¿è¡Œä¼šä½¿ç”¨ç¼“å­˜ï¼Œé€Ÿåº¦å¾ˆå¿«
```

#### æ¸…é™¤ç¼“å­˜

å¦‚æœé‡åˆ°å¥‡æ€ªçš„é—®é¢˜ï¼Œå¯ä»¥æ¸…é™¤ç¼“å­˜ï¼š

```bash
# æ¸…é™¤ uv ç¼“å­˜
uv cache clean

# é‡æ–°è¿è¡Œ
uvx --from git+https://github.com/Fize/choseStock.git a-share-mcp
```

#### MCP è¿æ¥å¤±è´¥

1. ç¡®ä¿å‘½ä»¤èƒ½æ­£å¸¸è¿è¡Œï¼š`uvx --from git+https://github.com/Fize/choseStock.git a-share-mcp`
2. æ£€æŸ¥å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä¸­çš„å‘½ä»¤æ ¼å¼æ˜¯å¦æ­£ç¡®
3. æŸ¥çœ‹å®¢æˆ·ç«¯æ—¥å¿—æ’æŸ¥é—®é¢˜

### è¯Šæ–­å·¥å…·

å¦‚æœéœ€è¦è¯¦ç»†è¯Šæ–­ï¼Œå¯ä»¥å…‹éš†ä»£ç è¿è¡Œè¯Šæ–­è„šæœ¬ï¼š

```bash
git clone https://github.com/Fize/choseStock.git
cd choseStock
uv run python dataflows_mcp/scripts/diagnose.py
```


## ğŸ”§ å¯ç”¨å·¥å…·

### æ•°æ®è·å–å·¥å…·

#### 1. get_stock_kline_data
è·å–è‚¡ç¥¨Kçº¿æ•°æ®ï¼ˆOHLCVï¼‰

**å‚æ•°**:
- `code` (string, å¿…éœ€): è‚¡ç¥¨ä»£ç ï¼Œå¦‚"600519"
- `lookback_days` (integer, å¯é€‰): å›æº¯å¤©æ•°ï¼Œé»˜è®¤60
- `period` (string, å¯é€‰): å‘¨æœŸç±»å‹ï¼Œå¯é€‰å€¼ï¼šdaily/weekly/monthlyï¼Œé»˜è®¤daily

**è¿”å›æ ¼å¼**:
```json
{
  "success": true,
  "data": [
    {
      "date": "2025-10-10",
      "open": 1800.0,
      "high": 1850.0,
      "low": 1790.0,
      "close": 1820.0,
      "volume": 1000000
    }
  ],
  "meta": {
    "code": "600519",
    "period": "daily",
    "count": 30
  },
  "error": null
}
```

#### 2. get_stock_realtime_data
è·å–è‚¡ç¥¨å®æ—¶è¡Œæƒ…æ•°æ®

**å‚æ•°**:
- `code` (string, å¿…éœ€): è‚¡ç¥¨ä»£ç 

**è¿”å›**: åŒ…å«æœ€æ–°ä»·ã€æ¶¨è·Œå¹…ã€æˆäº¤é‡ç­‰å®æ—¶æ•°æ®

#### 3. get_technical_indicator_data
è®¡ç®—æŠ€æœ¯æŒ‡æ ‡

**å‚æ•°**:
- `code` (string, å¿…éœ€): è‚¡ç¥¨ä»£ç 
- `indicator` (string, å¿…éœ€): æŒ‡æ ‡åç§°ï¼Œå¦‚"rsi"ã€"macd"ã€"boll"
- `lookback_days` (integer, å¯é€‰): å›æº¯å¤©æ•°ï¼Œé»˜è®¤100

**æ”¯æŒçš„æŒ‡æ ‡**: rsi, macd, kdj, boll, ma, ema, wr, cci, dmi, obv, atr, roc ç­‰20+ç§

#### 4. get_stock_financial_data
è·å–è´¢åŠ¡æŠ¥è¡¨æ•°æ®

**å‚æ•°**:
- `code` (string, å¿…éœ€): è‚¡ç¥¨ä»£ç 
- `report_type` (string, å¯é€‰): æŠ¥è¡¨ç±»å‹
  - `balance_sheet`: èµ„äº§è´Ÿå€ºè¡¨ï¼ˆé»˜è®¤ï¼‰
  - `income_statement`: åˆ©æ¶¦è¡¨
  - `cash_flow`: ç°é‡‘æµé‡è¡¨

#### 5. get_stock_news_data
è·å–è‚¡ç¥¨ç›¸å…³æ–°é—»

**å‚æ•°**:
- `code` (string, å¿…éœ€): è‚¡ç¥¨ä»£ç 
- `lookback_days` (integer, å¯é€‰): å›æº¯å¤©æ•°ï¼Œé»˜è®¤7
- `limit` (integer, å¯é€‰): æ–°é—»æ•°é‡é™åˆ¶ï¼Œé»˜è®¤100

#### 6. get_limit_up_stocks_data
è·å–ä»Šæ—¥æ¶¨åœè‚¡ç¥¨åˆ—è¡¨

**å‚æ•°**: æ— 

**è¿”å›**: åŒ…å«æ¶¨åœè‚¡ç¥¨ä»£ç ã€åç§°ã€æ¶¨åœæ—¶é—´ç­‰ä¿¡æ¯

### åƒè‚¡åƒè¯„å·¥å…·

#### 7. get_stock_comment_score_data
è·å–è‚¡ç¥¨ç»¼åˆè¯„åˆ†æ•°æ®

**å‚æ•°**:
- `code` (string, å¿…éœ€): è‚¡ç¥¨ä»£ç 

#### 8. get_stock_comment_focus_data
è·å–è‚¡ç¥¨å…³æ³¨æŒ‡æ•°

**å‚æ•°**:
- `code` (string, å¿…éœ€): è‚¡ç¥¨ä»£ç 

#### 9. get_stock_comment_desire_data
è·å–è‚¡ç¥¨å‚ä¸æ„æ„¿æŒ‡æ•°

**å‚æ•°**:
- `code` (string, å¿…éœ€): è‚¡ç¥¨ä»£ç 

#### 10. get_stock_comment_institution_data
è·å–æœºæ„å‚ä¸åº¦æ•°æ®

**å‚æ•°**:
- `code` (string, å¿…éœ€): è‚¡ç¥¨ä»£ç 

### èµ„é‡‘æµå‘å·¥å…·

#### 11. get_individual_fund_flow_data
è·å–ä¸ªè‚¡èµ„é‡‘æµå‘æ•°æ®ï¼ˆä¸œæ–¹è´¢å¯Œï¼‰

**å‚æ•°**:
- `code` (string, å¿…éœ€): è‚¡ç¥¨ä»£ç ï¼Œå¦‚"600519"
- `market` (string, å¯é€‰): å¸‚åœºç±»å‹ï¼Œå¯é€‰å€¼ï¼šsh/sz/bjï¼Œé»˜è®¤sh

**è¿”å›æ ¼å¼**:
```json
{
  "success": true,
  "data": [
    {
      "date": "2025-01-15",
      "close_price": 1820.0,
      "change_percent": 2.5,
      "main_net_inflow": 150000000.0,
      "main_net_inflow_rate": 5.2,
      "super_large_net_inflow": 80000000.0,
      "super_large_net_inflow_rate": 2.8,
      "large_net_inflow": 70000000.0,
      "large_net_inflow_rate": 2.4,
      "medium_net_inflow": -50000000.0,
      "medium_net_inflow_rate": -1.7,
      "small_net_inflow": -100000000.0,
      "small_net_inflow_rate": -3.5
    }
  ],
  "error": null
}
```

**è¯´æ˜**:
- `main_net_inflow`: ä¸»åŠ›å‡€æµå…¥é‡‘é¢ï¼ˆå…ƒï¼‰
- `super_large_net_inflow`: è¶…å¤§å•å‡€æµå…¥é‡‘é¢
- `large_net_inflow`: å¤§å•å‡€æµå…¥é‡‘é¢
- `medium_net_inflow`: ä¸­å•å‡€æµå…¥é‡‘é¢
- `small_net_inflow`: å°å•å‡€æµå…¥é‡‘é¢
- `*_rate`: å¯¹åº”çš„å‡€æµå…¥ç‡ï¼ˆ%ï¼‰

#### 12. get_concept_fund_flow_data
è·å–æ¦‚å¿µæ¿å—èµ„é‡‘æµå‘æ•°æ®ï¼ˆåŒèŠ±é¡ºï¼‰

**å‚æ•°**:
- `symbol` (string, å¯é€‰): æ¿å—ç±»å‹ï¼Œå¯é€‰å€¼ï¼šå³æ—¶/3æ—¥æ’è¡Œ/5æ—¥æ’è¡Œ/10æ—¥æ’è¡Œ/20æ—¥æ’è¡Œï¼Œé»˜è®¤"å³æ—¶"
- `indicator` (string, å¯é€‰): æŒ‡æ ‡ç±»å‹ï¼Œå¯é€‰å€¼åŒä¸Šï¼Œé»˜è®¤"å³æ—¶"

**è¿”å›æ ¼å¼**:
```json
{
  "success": true,
  "data": [
    {
      "åºå·": 1,
      "æ¿å—": "äººå·¥æ™ºèƒ½",
      "æœ€æ–°ä»·": 1520.5,
      "æ¶¨è·Œå¹…": 3.2,
      "æµå…¥èµ„é‡‘": 500000000.0,
      "æµå‡ºèµ„é‡‘": 350000000.0,
      "å‡€é¢": 150000000.0,
      "å…¬å¸å®¶æ•°": 85,
      "é¢†æ¶¨è‚¡": "ç§‘å¤§è®¯é£",
      "é¢†æ¶¨è‚¡æ¶¨è·Œå¹…": 5.8
    }
  ],
  "error": null
}
```

**è¯´æ˜**:
- æ”¯æŒå³æ—¶æ•°æ®å’Œå¤šæ—¥æ’è¡Œæ¦œæŸ¥è¯¢
- è¿”å›å­—æ®µæ ¹æ®æŸ¥è¯¢ç±»å‹ç•¥æœ‰å·®å¼‚
- å¯ç”¨äºåˆ†æçƒ­é—¨æ¦‚å¿µæ¿å—èµ„é‡‘åŠ¨å‘

#### 13. get_industry_fund_flow_data
è·å–è¡Œä¸šæ¿å—èµ„é‡‘æµå‘æ•°æ®ï¼ˆåŒèŠ±é¡ºï¼‰

**å‚æ•°**:
- `symbol` (string, å¯é€‰): æ¿å—ç±»å‹ï¼Œå¯é€‰å€¼ï¼šå³æ—¶/3æ—¥æ’è¡Œ/5æ—¥æ’è¡Œ/10æ—¥æ’è¡Œ/20æ—¥æ’è¡Œï¼Œé»˜è®¤"å³æ—¶"
- `indicator` (string, å¯é€‰): æŒ‡æ ‡ç±»å‹ï¼Œå¯é€‰å€¼åŒä¸Šï¼Œé»˜è®¤"å³æ—¶"

**è¿”å›æ ¼å¼**:
```json
{
  "success": true,
  "data": [
    {
      "åºå·": 1,
      "æ¿å—": "ç”µå­",
      "æœ€æ–°ä»·": 2300.8,
      "æ¶¨è·Œå¹…": 2.1,
      "æµå…¥èµ„é‡‘": 800000000.0,
      "æµå‡ºèµ„é‡‘": 600000000.0,
      "å‡€é¢": 200000000.0,
      "å…¬å¸å®¶æ•°": 120,
      "é¢†æ¶¨è‚¡": "ç«‹è®¯ç²¾å¯†",
      "é¢†æ¶¨è‚¡æ¶¨è·Œå¹…": 4.5
    }
  ],
  "error": null
}
```

**è¯´æ˜**:
- ä¸æ¦‚å¿µæ¿å—æ•°æ®ç»“æ„ç±»ä¼¼
- æŒ‰ç…§ç”³ä¸‡è¡Œä¸šåˆ†ç±»ç»Ÿè®¡
- å¯ç”¨äºåˆ†æè¡Œä¸šè½®åŠ¨å’Œèµ„é‡‘åå¥½

#### 14. get_big_deal_fund_flow_data
è·å–å¤§å•è¿½è¸ªæ•°æ®ï¼ˆåŒèŠ±é¡ºï¼‰

**å‚æ•°**: æ— 

**è¿”å›æ ¼å¼**:
```json
{
  "success": true,
  "data": [
    {
      "trade_time": "14:35:20",
      "code": "600519",
      "name": "è´µå·èŒ…å°",
      "trade_price": 1820.0,
      "trade_volume": 5000,
      "trade_amount": 9100000.0,
      "deal_type": "ä¹°ç›˜",
      "change_percent": 2.5,
      "turnover_rate": 0.15
    }
  ],
  "error": null
}
```

**è¯´æ˜**:
- `trade_time`: æˆäº¤æ—¶é—´
- `deal_type`: æˆäº¤ç±»å‹ï¼ˆä¹°ç›˜/å–ç›˜/ä¸­æ€§ç›˜ï¼‰
- `trade_amount`: æˆäº¤é‡‘é¢ï¼ˆå…ƒï¼‰
- å®æ—¶è¿½è¸ªå¤§é¢äº¤æ˜“ï¼Œæ•æ‰ä¸»åŠ›èµ„é‡‘åŠ¨å‘

#### 15. get_stock_cyq_data
è·å–è‚¡ç¥¨ç­¹ç åˆ†å¸ƒæ•°æ®ï¼ˆä¸œæ–¹è´¢å¯Œï¼‰

**å‚æ•°**:
- `code` (string, å¿…éœ€): è‚¡ç¥¨ä»£ç 
- `adjust` (string, å¯é€‰): å¤æƒç±»å‹ï¼Œé»˜è®¤ä¸º ""
  - `""`: ä¸å¤æƒ
  - `"qfq"`: å‰å¤æƒ
  - `"hfq"`: åå¤æƒ

**è¿”å›æ ¼å¼**:
```json
{
  "success": true,
  "data": [
    {
      "date": "2024-01-15",
      "profit_ratio": 85.5,
      "average_cost": 1650.0,
      "90_cost_low": 1500.0,
      "90_cost_high": 1800.0,
      "90_concentration": 15.2,
      "70_cost_low": 1550.0,
      "70_cost_high": 1750.0,
      "70_concentration": 10.8
    }
  ],
  "error": null
}
```

**è¯´æ˜**:
- `profit_ratio`: è·åˆ©æ¯”ä¾‹ï¼ˆ%ï¼‰ï¼Œå½“å‰ä»·æ ¼ä¸‹çš„ç›ˆåˆ©ç­¹ç å æ¯”
- `average_cost`: å¹³å‡æˆæœ¬ï¼ˆå…ƒï¼‰ï¼Œæ‰€æœ‰ç­¹ç çš„åŠ æƒå¹³å‡ä»·æ ¼
- `90_cost_low/high`: 90%æˆæœ¬åŒºé—´ï¼ˆå…ƒï¼‰ï¼Œ90%ç­¹ç åˆ†å¸ƒçš„ä»·æ ¼èŒƒå›´
- `90_concentration`: 90%é›†ä¸­åº¦ï¼ˆ%ï¼‰ï¼Œ90%ç­¹ç ä»·æ ¼åˆ†å¸ƒçš„ç´§å¯†ç¨‹åº¦
- `70_cost_low/high`: 70%æˆæœ¬åŒºé—´ï¼ˆå…ƒï¼‰ï¼Œ70%ç­¹ç åˆ†å¸ƒçš„ä»·æ ¼èŒƒå›´
- `70_concentration`: 70%é›†ä¸­åº¦ï¼ˆ%ï¼‰ï¼Œ70%ç­¹ç ä»·æ ¼åˆ†å¸ƒçš„ç´§å¯†ç¨‹åº¦
- æ•°æ®æ¶µç›–è¿‘90ä¸ªäº¤æ˜“æ—¥
- ç­¹ç åˆ†å¸ƒåˆ†æä¸»åŠ›æŒä»“æˆæœ¬å’Œæ•£æˆ·å¥—ç‰¢åŒºåŸŸ


## ğŸ—ï¸ æ¶æ„è®¾è®¡

### é¡¹ç›®ç»“æ„

```
choseStock/
â”œâ”€â”€ dataflows_mcp/           # MCP æ•°æ®æµæœåŠ¡
â”‚   â”œâ”€â”€ core/                    # æ ¸å¿ƒåŠŸèƒ½å±‚
â”‚   â”‚   â”œâ”€â”€ akshare_client.py       # AkShareæ•°æ®æºå®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ a_share_technical.py    # æŠ€æœ¯åˆ†æå¼•æ“
â”‚   â”‚   â”œâ”€â”€ session_cache.py        # ä¼šè¯ç¼“å­˜ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ exceptions.py           # è‡ªå®šä¹‰å¼‚å¸¸
â”‚   â”‚   â”œâ”€â”€ factories.py            # å·¥å‚æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ logging.py              # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ utils.py                # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ tools/                   # MCP å·¥å…·å±‚
â”‚   â”‚   â”œâ”€â”€ mcp_tools.py            # å·¥å…·å®ç°
â”‚   â”‚   â””â”€â”€ schemas.py              # Pydantic Schema
â”‚   â”œâ”€â”€ server/                  # MCP æœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ mcp_server.py           # MCP æœåŠ¡å™¨
â”‚   â”œâ”€â”€ scripts/                 # å®ç”¨è„šæœ¬
â”‚   â”‚   â””â”€â”€ diagnose.py             # è¯Šæ–­å·¥å…·
â”‚   â””â”€â”€ tests/                   # æµ‹è¯•å¥—ä»¶
â”‚       â”œâ”€â”€ test_mcp_tools.py
â”‚       â”œâ”€â”€ test_mcp_server.py
â”‚       â”œâ”€â”€ test_schemas.py
â”‚       â””â”€â”€ test_data_format.py
â”œâ”€â”€ pyproject.toml           # é¡¹ç›®é…ç½®
â”œâ”€â”€ uv.lock                  # ä¾èµ–é”æ–‡ä»¶
â””â”€â”€ README.md                # é¡¹ç›®æ–‡æ¡£
```

### è®¾è®¡åŸåˆ™

1. **åˆ†å±‚æ¶æ„**: 
   - Core å±‚ï¼šä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è·å–
   - Tools å±‚ï¼šMCP å·¥å…·å°è£…
   - Server å±‚ï¼šMCP åè®®å®ç°

2. **ä¾èµ–æ³¨å…¥**: ä½¿ç”¨å·¥å‚æ¨¡å¼åˆ›å»ºå®ä¾‹ï¼Œä¾¿äºæµ‹è¯•å’Œæ‰©å±•

3. **å¼‚æ­¥ä¼˜å…ˆ**: æ‰€æœ‰å·¥å…·æ–¹æ³•æ”¯æŒå¼‚æ­¥è°ƒç”¨ï¼Œæå‡å¹¶å‘æ€§èƒ½

4. **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„å¼‚å¸¸ä½“ç³»ï¼Œå®Œå–„çš„é”™è¯¯ä¼ æ’­æœºåˆ¶

5. **æ—¥å¿—ç³»ç»Ÿ**: æ ‡å‡†åŒ–æ—¥å¿—è¾“å‡ºï¼Œä¾¿äºç›‘æ§å’Œè°ƒè¯•

6. **æµ‹è¯•è¦†ç›–**: å®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼Œç¡®ä¿ä»£ç è´¨é‡

## ğŸ“Š æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| åè®® | MCP 1.0.0 | Model Context Protocol |
| æ•°æ®æº | AkShare 1.17+ | Aè‚¡æ•°æ®è·å– |
| æ•°æ®å¤„ç† | Pandas 2.2+ | æ•°æ®åˆ†æå’Œå¤„ç† |
| æŠ€æœ¯åˆ†æ | pandas-ta | æŠ€æœ¯æŒ‡æ ‡è®¡ç®— |
| æ•°æ®éªŒè¯ | Pydantic 2.0+ | Schema å®šä¹‰å’ŒéªŒè¯ |
| å¼‚æ­¥ | asyncio | å¼‚æ­¥ IO æ”¯æŒ |
| æµ‹è¯• | pytest | å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯• |
| åŒ…ç®¡ç† | uv | å¿«é€Ÿçš„ Python åŒ…ç®¡ç†å™¨ |

## ğŸ“ æ›´æ–°æ—¥å¿—

### v0.1.0 (2025-10-21)

**MCP æœåŠ¡å™¨æ ‡å‡†åŒ–æ”¹é€ **ï¼š
- âœ… ä½¿ç”¨ `pyproject.toml` é…ç½®æ ‡å‡†å…¥å£ç‚¹
- âœ… é‡‡ç”¨ uv ä½œä¸ºåŒ…ç®¡ç†å™¨
- âœ… æ”¯æŒ `uvx` ä» GitHub ç›´æ¥è¿è¡Œï¼Œæ— éœ€å…‹éš†ä»£ç 
- âœ… ç®€åŒ–å¯åŠ¨æ–¹å¼ä¸º `uvx --from git+...` æˆ– `a-share-mcp`
- âœ… ç§»é™¤æ‰‹åŠ¨è·¯å¾„ç®¡ç†è„šæœ¬
- âœ… å®Œå–„åŒ…ç»“æ„ï¼ˆæ·»åŠ  `__init__.py`ï¼‰
- âœ… å®Œå–„æ–‡æ¡£å’Œå¼€å‘æŒ‡å—

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- 15+ æ•°æ®å·¥å…·æ¶µç›–è¡Œæƒ…ã€æŠ€æœ¯æŒ‡æ ‡ã€è´¢åŠ¡ã€èµ„é‡‘æµå‘ç­‰
- å®Œæ•´çš„æµ‹è¯•å¥—ä»¶ç¡®ä¿ä»£ç è´¨é‡
- å¼‚æ­¥æ”¯æŒæå‡å¹¶å‘æ€§èƒ½
- å†…ç½®ç¼“å­˜ä¼˜åŒ–æ•°æ®è·å–

## ğŸš€ éƒ¨ç½²

**å¿«é€Ÿéƒ¨ç½²ï¼ˆæ¨èï¼‰**ï¼š

```bash
# æ— éœ€å…‹éš†ä»£ç ï¼Œç›´æ¥è¿è¡Œ
uvx --from git+https://github.com/Fize/choseStock.git a-share-mcp
```

è¯¦ç»†éƒ¨ç½²æŒ‡å—è¯·æŸ¥çœ‹ [DEPLOYMENT.md](./DEPLOYMENT.md)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

- [AkShare](https://github.com/akfamily/akshare) - æä¾›Aè‚¡æ•°æ®æº
- [MCP](https://modelcontextprotocol.io/) - Model Context Protocol
